(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-09bce843"],{"55e1":function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"vx-row"},[n("div",{staticClass:"vx-col md:w-1/3 w-full mb-base"},[n("vx-card",[e._l(e.internshipObject.fieldsSettings(),(function(t,s){return[e.isVisible(t)?["select"===t.type?n("v-select-box",{key:s,attrs:{settings:t,object:e.internshipObject,field:s}}):"form"===t.type?n("v-select-box",{key:s,attrs:{settings:t,object:e.internshipObject,field:s}}):n("v-text-box",{key:s,attrs:{object:e.internshipObject,field:s}})]:e._e()]})),n("div",{staticClass:"vx-row mb-6"},[n("div",{staticClass:"vx-col  w-full"},[n("vs-select",{staticClass:"w-full",attrs:{danger:e.hasErrors(e.internshipObject,"studyCompetence"),"danger-text":e.errorText(e.internshipObject,"studyCompetence"),label:e.$t("STUDY_COMPETENCES.TITLE"),multiple:!0,autocomplete:""},model:{value:e.selectedCompetences,callback:function(t){e.selectedCompetences=t},expression:"selectedCompetences"}},e._l(e.studyCompetences.models,(function(e){return n("vs-select-item",{key:e.id,attrs:{value:e.id,text:e.name}})})),1)],1)])],2)],1),n("div",{staticClass:"vx-col w-full mb-base"},[n("div",{staticClass:"vx-col w-full ml-auto"},[n("vs-button",{staticClass:"mr-3 mb-2",on:{click:e.submit}},[e._v(e._s(e.$t("GLOBALS.SUBMIT")))])],1)])])},i=[],r=(n("6762"),n("2fdb"),n("7f7f"),n("ac4d"),n("8a81"),n("ac6a"),n("7514"),n("96cf"),n("3b8d")),a=(n("c5f6"),n("aa06")),o=n("18c6"),u=n("2bcd"),c=n("f5c3"),l=(n("a753"),n("8096"),n("14e1"),n("953d")),d=n("7550"),p={components:{VTextBox:o["a"],VSelectBox:u["a"],quillEditor:l["quillEditor"]},props:{internship:{type:Object,default:function(){return new a["a"]}},id:{type:[Number,String],default:function(){return null}}},data:function(){return{internshipObject:this.internship,studyCompetences:new c["b"],selectedCompetences:[],studyPrograms:new d["b"]}},mounted:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.internshipObject.id||!this.id){e.next=5;break}return t=new a["b"],e.next=4,t.fetch();case 4:this.internshipObject=t.find((function(e){return e.id===parseInt(n.id)}));case 5:this.internshipObject.studyProgram&&(this.studyCompetences=this.getStudyCompetencesFromStudyProgram(this.internshipObject.studyProgram)),this.internshipObject.on("change",(function(e){"studyProgram"===e.attribute&&n.internshipObject.studyProgram&&(n.studyCompetences=n.getStudyCompetencesFromStudyProgram(n.internshipObject.studyProgram))})),this.selectedCompetences=this.internshipObject.studyCompetence.map((function(e){return e.id}));case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{getStudyCompetencesFromStudyProgram:function(e){var t=e.studyCompetences;if(e.studyModules){var n=!0,s=!1,i=void 0;try{for(var r,a=function(){var e=r.value;t=t.concat(e.studyCompetences.map((function(t){return t.name=e.name+" - "+t.name,t})))},o=e.studyModules[Symbol.iterator]();!(n=(r=o.next()).done);n=!0)a()}catch(u){s=!0,i=u}finally{try{n||null==o.return||o.return()}finally{if(s)throw i}}}return new c["b"](t)},isVisible:function(e){return this.internshipObject.id?e.showOnUpdate:e.showOnCreate},submit:function(){var e=this;this.internship.studyCompetence=this.studyCompetences.filter((function(t){return e.selectedCompetences.includes(t.id)}));var t="save";this.internshipObject.id&&(t="patch"),this.internshipObject[t]().then((function(){e.$router.push({name:"internships"}),e.$vs.notify({color:"success",title:e.$t("GLOBALS.RECORD_CREATED"),text:e.$t("GLOBALS.RECORD_SUCCESSFULLY_CREATED")})})).catch((function(t){e.showValidationErrors(e.internshipObject),e.$vs.notify({color:"danger",title:e.$t("GLOBALS.ERROR_ON_SAVE"),text:t.message})}))}}},h=p,f=n("2877"),b=Object(f["a"])(h,s,i,!1,null,null,null);t["default"]=b.exports},aa06:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return b}));n("a481");var s=n("d225"),i=n("b0b4"),r=n("308d"),a=n("6bb5"),o=n("4e2b"),u=n("9242"),c=n("e7d5"),l=n("20ce"),d=n("f5c3"),p=n("7550"),h=(n("7f97"),n("1d63")),f=function(e){function t(){return Object(s["a"])(this,t),Object(r["a"])(this,Object(a["a"])(t).apply(this,arguments))}return Object(o["a"])(t,e),Object(i["a"])(t,[{key:"defaults",value:function(){return{id:null,organization:null,studyProgram:null,studyCompetence:new d["b"]}}},{key:"options",value:function(){return{identifier:"id",useFirstErrorOnly:!0}}},{key:"displayField",value:function(){return"id"}},{key:"mutations",value:function(){return{}}},{key:"fieldsSettings",value:function(){return{id:{label:"GLOBALS.ID",type:"text",showInList:!0,showInView:!1,showOnCreate:!1,showOnUpdate:!1,pinned:"left",width:100},organization:{label:"ORGANIZATIONS.TITLE_SINGLE",type:"select",showInList:!0,showInView:!0,showOnCreate:!0,showOnUpdate:!0,values:new h["b"]},studyProgram:{label:"STUDY_PROGRAMS.TITLE",type:"select",showInList:!0,showInView:!0,showOnCreate:!0,showOnUpdate:!0,values:new p["b"]},studyCompetence:{label:"COMPETENCES.TITLE",type:"select",showInList:!1,showInView:!0,showOnCreate:!1,showOnUpdate:!1,multiple:!0,values:new d["b"]}}}},{key:"validation",value:function(){return{organization:l["required"],studyProgram:l["required"]}}},{key:"routes",value:function(){return{fetch:"/editInternship/{id}",save:"/createInternship",patch:"/editInternship",delete:"/deleteInternship/{id}",apply:"/applyForInternship"}}},{key:"apply",value:function(){var e={url:"/applyForInternship/"+this.id,method:"GET"};return this.createRequest(e).send()}}]),t}(u["a"]),b=function(e){function t(){return Object(s["a"])(this,t),Object(r["a"])(this,Object(a["a"])(t).apply(this,arguments))}return Object(o["a"])(t,e),Object(i["a"])(t,[{key:"model",value:function(){return f}},{key:"defaults",value:function(){return{orderBy:"id"}}},{key:"routes",value:function(){return{fetch:"/listInternships",fetchForStudyProgram:"/listInternships/{study_program_id}"}}},{key:"fetchForStudyProgram",value:function(e){var t=this,n={url:"/listInternships/"+e,method:"GET"};return this.createRequest(n).send().then((function(e){t.replace(e.response.data)})).catch((function(e){}))}}]),t}(c["a"])}}]);
//# sourceMappingURL=chunk-09bce843.f0323053.js.map