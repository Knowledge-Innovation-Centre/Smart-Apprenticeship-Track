(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2226f6"],{cf30:function(t,e,s){"use strict";s.r(e);var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t._l(t.evaluationTemplatesCollection.models,(function(e,o){return s("div",{key:o,staticClass:"vx-row"},[s("div",{staticClass:"vx-col md:w-6/12 w-full mb-base"},[s("vs-card",{attrs:{actionable:"","fixed-height":""}},[t._l(e.fieldsSettings(),(function(o,n){return[t.isVisible(o,e)?["select"===o.type?s("v-select-box",{key:n,attrs:{settings:o,object:e,field:n}}):s("v-text-box",{key:n,attrs:{object:e,field:n}})]:t._e()]}))],2)],1),s("div",{staticClass:"vx-col md:w-5/12 w-full mb-base"},[s("vs-card",{attrs:{"fixed-height":"",actionable:""}},[s("vs-select",{staticClass:"w-full",attrs:{label:t.$t("GLOBALS.QUESTION_TYPE"),autocomplete:""},model:{value:e.type,callback:function(s){t.$set(e,"type",s)},expression:"evaluationTemplateObject.type"}},t._l(t.questionTypes,(function(t){return s("vs-select-item",{key:t,attrs:{value:t,text:t}})})),1),t.showOptions(e.type)?[t._l(e.optionsArray,(function(o,n){return s("div",{key:n,staticClass:"vx-row"},[s("div",{staticClass:"vx-col md:w-12/12 w-full"},[s("vs-divider")],1),s("div",{staticClass:"vx-col md:w-11/12 w-full"},[s("vs-input",{staticClass:"w-full",attrs:{label:t.$t("GLOBALS.OPTION")},model:{value:o.value,callback:function(e){t.$set(o,"value",e)},expression:"option.value"}})],1),s("div",{staticClass:"vx-col md:w-1/12"},[s("vs-button",{staticClass:"float-right mt-6",attrs:{size:"small",type:"border",icon:"delete"},on:{click:function(s){return t.removeOption(e,n)}}})],1)])})),s("div",{staticClass:"vx-row"},[s("div",{staticClass:"vx-col w-full"},[s("vs-button",{staticClass:"mt-10 float-right",on:{click:function(s){return t.addOption(e)}}},[t._v(t._s(t.$t("GLOBALS.ADD_OPTION")))])],1)])]:t._e()],2)],1),s("div",{staticClass:"vx-col md:w-1/12 w-full mb-base"},[s("vs-button",{staticClass:"float-right ",attrs:{size:"",type:"border",icon:"delete"},on:{click:function(s){return t.remove(e)}}})],1)])})),s("div",{staticClass:"vx-row"},[s("div",{staticClass:"vx-col sm:w-3/3 w-full ml-auto"},[s("vs-button",{staticClass:"mr-3 mb-2",on:{click:t.addItem}},[t._v(t._s(t.$t("GLOBALS.ADD_ITEM")))])],1)]),s("div",{staticClass:"vx-row"},[s("div",{staticClass:"vx-col sm:w-3/3 w-full ml-auto"},[s("vs-button",{staticClass:"mr-3 mb-2",on:{click:t.submit}},[t._v(t._s(t.$t("GLOBALS.SAVE_ALL")))])],1)])],2)},n=[],i=(s("ac4d"),s("8a81"),s("ac6a"),s("96cf"),s("3b8d")),r=(s("a481"),s("d225")),a=s("b0b4"),l=s("308d"),u=s("6bb5"),c=s("4e2b"),d=s("9242"),h=s("e7d5"),v=s("0006"),p=s("07a4"),f=(new v["a"],function(t){function e(){return Object(r["a"])(this,e),Object(l["a"])(this,Object(u["a"])(e).apply(this,arguments))}return Object(c["a"])(e,t),Object(a["a"])(e,[{key:"defaults",value:function(){return{id:null,question:null,optionsArray:[],options:"",show_if:null,show_if_value:null,school_id:p["a"].state.AppActiveUser.school,question_for:"student",ordnum:1}}},{key:"options",value:function(){return{identifier:"id",useFirstErrorOnly:!0}}},{key:"displayField",value:function(){return"id"}},{key:"mutations",value:function(){return{}}},{key:"fieldsSettings",value:function(){return{id:{label:"GLOBALS.ID",type:"text",showInList:!0,showInView:!1,showOnCreate:!1,showOnUpdate:!1,pinned:"left",width:100},question:{label:"GLOBALS.QUESTION",type:"text",showInList:!0,showOnCreate:!0,showOnUpdate:!0},options:{label:"GLOBALS.OPTIONS",type:"text",showInList:!1,showOnCreate:!1,showOnUpdate:!1},show_if:{label:"GLOBALS.OTHER_QUESTION_DEPENDENCY",type:"select",showInList:!1,showInView:!1,showOnCreate:!1,showOnUpdate:!1,values:new e},show_if_value:{label:"GLOBALS.OTHER_QUESTION_VALUE_DEPENDENCY",type:"text",showInList:!1,showInView:!1,showOnCreate:!1,showOnUpdate:!1},question_for:{label:"GLOBALS.SHOW_FOR_ROLE",type:"select",showInList:!0,showInView:!0,showOnCreate:!1,showOnUpdate:!1,sendOnlyIds:!0,values:[{name:"Student",id:"ROLE_STUDENT"},{name:"School organizer",id:"ROLE_SCHOOLORG"},{name:"Mentor",id:"ROLE_MENTOR"}]},ordnum:{label:"GLOBALS.ORDER",type:"numeric",showInList:!1,showInView:!0,showOnCreate:!1,showOnUpdate:!1}}}},{key:"validation",value:function(){return{}}},{key:"routes",value:function(){return{save:"/createEvaluationTemplate"}}}]),e}(d["a"])),w=function(t){function e(){return Object(r["a"])(this,e),Object(l["a"])(this,Object(u["a"])(e).apply(this,arguments))}return Object(c["a"])(e,t),Object(a["a"])(e,[{key:"model",value:function(){return f}},{key:"defaults",value:function(){return{orderBy:"id"}}},{key:"routes",value:function(){return{listQuestionsForStudent:"listQuestionsForStudent",listQuestionsForMentor:"listQuestionsForMentor",listQuestionsForSchool:"listQuestionsForSchool",storeQuestionsForSchool:"/storeQuestionsForSchool",storeQuestionsForStudent:"/storeQuestionsForStudent",storeQuestionsForMentor:"/storeQuestionsForMentor",storeAnswersForSchool:"/storeAnswersForSchool",storeAnswersForStudent:"/storeAnswersForStudent",storeAnswersForMentor:"/storeAnswersForMentor"}}},{key:"listQuestionsForStudent",value:function(){var t=this,e={url:"/listQuestionsForStudent",method:"GET"};return this.createRequest(e).send().then((function(e){t.replace(e.response.data)})).catch((function(t){}))}},{key:"listQuestionsForMentor",value:function(){var t=this,e={url:"/listQuestionsForMentor",method:"GET"};return this.createRequest(e).send().then((function(e){t.replace(e.response.data)})).catch((function(t){}))}},{key:"listQuestionsForSchool",value:function(){var t=this,e={url:"/listQuestionsForSchool",method:"GET"};return this.createRequest(e).send().then((function(e){t.replace(e.response.data)})).catch((function(t){}))}},{key:"listAnswersForStudent",value:function(t){var e=this,s={url:"/listAnswersForStudent/"+t,method:"GET"};return this.createRequest(s).send().then((function(t){e.replace(t.response.data)})).catch((function(t){}))}},{key:"listAnswersForMentor",value:function(t){var e=this,s={url:"/listAnswersForMentor/"+t,method:"GET"};return this.createRequest(s).send().then((function(t){e.replace(t.response.data)})).catch((function(t){}))}},{key:"listAnswersForSchool",value:function(t){var e=this,s={url:"/listAnswersForSchool/"+t,method:"GET"};return this.createRequest(s).send().then((function(t){e.replace(t.response.data)})).catch((function(t){}))}},{key:"storeQuestionsForStudent",value:function(){var t="POST",e=this.getRoute("storeQuestionsForStudent"),s=this.getURL(e),o=this.models;return this.createRequest({method:t,url:s,data:o}).send()}},{key:"storeQuestionsForMentor",value:function(){var t="POST",e=this.getRoute("storeQuestionsForMentor"),s=this.getURL(e),o=this.models;return this.createRequest({method:t,url:s,data:o}).send()}},{key:"storeQuestionsForSchool",value:function(){var t="POST",e=this.getRoute("storeQuestionsForSchool"),s=this.getURL(e),o=this.models;return this.createRequest({method:t,url:s,data:o}).send()}},{key:"storeAnswersForStudent",value:function(t){var e="POST",s=this.getRoute("storeAnswersForStudent"),o=this.getURL(s)+"/"+t,n=this.models;return this.createRequest({method:e,url:o,data:n}).send()}},{key:"storeAnswersForMentor",value:function(t){var e="POST",s=this.getRoute("storeAnswersForMentor"),o=this.getURL(s)+"/"+t,n=this.models;return this.createRequest({method:e,url:o,data:n}).send()}},{key:"storeAnswersForSchool",value:function(t){var e="POST",s=this.getRoute("storeAnswersForSchool"),o=this.getURL(s)+"/"+t,n=this.models;return this.createRequest({method:e,url:o,data:n}).send()}}]),e}(h["a"]),m=s("18c6"),O=s("2bcd"),y=(s("bb36"),{components:{VTextBox:m["a"],VSelectBox:O["a"]},props:{saveMethod:{type:String,required:!0},listMethod:{type:String,required:!0}},data:function(){return{evaluationTemplatesCollection:new w,selectedQuestionTypes:[],questionTypes:["text","select","checkbox"],options:[],internshipAgreementObject:null,userid:null}},computed:{},watch:{saveMethod:function(){this.loadData()}},mounted:function(){var t=this.$route.params.id;t&&(this.id=t),this.loadData()},methods:{showOptions:function(t){return"select"===t||"checkbox"===t},loadData:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,s,o,n,i,r,a,l,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.id){t.next=9;break}return e=new w,t.next=4,e[this.listMethod](this.id);case 4:e.models.length&&(this.internshipAgreementObject=e.models[0].organization,this.userid=e.models[0].userid),s=e.models.map((function(t){return t.question})),this.evaluationTemplatesCollection=new w(s),t.next=11;break;case 9:return t.next=11,this.evaluationTemplatesCollection[this.listMethod]();case 11:for(o=new w,n=!0,i=!1,r=void 0,t.prev=15,a=this.evaluationTemplatesCollection.models[Symbol.iterator]();!(n=(l=a.next()).done);n=!0)u=l.value,u.type=this.getQuestionType(u),u.optionsArray=this.getQuestionOptions(u),o.add(u);t.next=23;break;case 19:t.prev=19,t.t0=t["catch"](15),i=!0,r=t.t0;case 23:t.prev=23,t.prev=24,n||null==a.return||a.return();case 26:if(t.prev=26,!i){t.next=29;break}throw r;case 29:return t.finish(26);case 30:return t.finish(23);case 31:this.evaluationTemplatesCollection=new w(o.models);case 32:case"end":return t.stop()}}),t,this,[[15,19,23,31],[24,,26,30]])})));function e(){return t.apply(this,arguments)}return e}(),getQuestionType:function(t){if(!t.options||""===t.options)return"text";var e=JSON.parse(t.options);return e.type?e.type:"text"},getQuestionOptions:function(t){if(!t.options||""===t.options)return[];var e=JSON.parse(t.options);return e.options?e.options:[]},isVisible:function(t,e){return e.id?t.showOnUpdate:t.showOnCreate},addItem:function(){var t=new f;this.evaluationTemplatesCollection.add(t),this.evaluationTemplatesCollection=new w(this.evaluationTemplatesCollection.models)},submit:function(){var t=this,e=new w,s=!0,o=!1,n=void 0;try{for(var i,r=this.evaluationTemplatesCollection.models[Symbol.iterator]();!(s=(i=r.next()).done);s=!0){var a=i.value;a.options=JSON.stringify({type:a.type,options:a.optionsArray}),e.add(a)}}catch(u){o=!0,n=u}finally{try{s||null==r.return||r.return()}finally{if(o)throw n}}this.evaluationTemplatesCollection=new w(e.models);var l=this.evaluationTemplatesCollection;l=this.id?l[this.saveMethod](this.id):l[this.saveMethod](),l.then((function(){t.$vs.notify({color:"success",title:t.$t("GLOBALS.RECORD_CREATED"),text:t.$t("GLOBALS.RECORD_SUCCESSFULLY_CREATED")})})).catch((function(e){t.showValidationErrors(l),t.$vs.notify({color:"danger",title:t.$t("GLOBALS.ERROR_ON_SAVE"),text:e.message})}))},addOption:function(t){var e=t.optionsArray;e.push({value:""}),this.$set(t,"optionsArray",e)},removeOption:function(t,e){console.log(t),t.optionsArray.splice(e,1)},remove:function(t){this.evaluationTemplatesCollection.remove(t)}}}),S=y,b=s("2877"),L=Object(b["a"])(S,o,n,!1,null,null,null);e["default"]=L.exports}}]);
//# sourceMappingURL=chunk-2d2226f6.6746f18e.js.map